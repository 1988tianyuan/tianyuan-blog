title: 《深入理解计算机系统》读书笔记——Chapter 3(3)
author: 天渊
tags:
  - csapp
categories:
  - 读书笔记
date: 2019-10-12 11:50:00
---
### 控制语句的实现

程序中的条件，循环和分支语句，需要有条件的执行，此时就不能按照传统方式将指令一条接一条地执行，而是需要根据条件从当前指令跳转到其他指令进行执行

计算机提供了两种机制来实现指令的有条件跳转：

1. 测试数据值
2. 根据测试结果改变控制流或数据流

#### 条件码寄存器

CPU维护了一种单个位`条件码`寄存器，这种寄存器只有0和1两种值，保存最近的运算操作产生结果的状态，通过检测这些寄存器来执行条件分支的跳转指令：

1. CF：进位标志，最近的操作是否使最高位产生了进位（无符号溢出）
2. ZF：零标志，最近的操作结果是否为0
3. SF：符号标志，最近的操作结果是否为负数
4. OF：溢出标志，与CF的区别是OF是有符号的补码溢出

之前描述的所有算术和逻辑运算指令在计算结果后，都会同时设置`条件码`

除此之外还有两个指令是专门用于设置`条件码`寄存器，而不会改变操作数：

1. CMP指令：CMP指令的操作和`SUB`指令都是一样的，都是做减法，不过CMP指令只修改条件码寄存器（ZF或者SF），用以比较两个数的大小，而不用修改任何一个操作数
2. TEST指令：TEST指令的操作和`AND`指令是一样的，都是作`&`操作，可以用来判断某数的符号

#### 如何访问条件码

条件码设置好后，需要读取条件码的状态来决定如何跳转，但是条件码寄存器的状态不能直接读取，可以通过特殊的指令读取多个条件吗寄存器的组合值，来确定某个条件

















